# Table of content
- [Introduction to FareZone](#introduction-to-farezones)
  - [Grouping of FareZones](#grouping-of-farezones)
  - [Object Descriptions](#object-descriptions)
- [Guideline to optional fields](#guideline-to-optional-fields)
  - [Geometry](#geometry)
- [Publication to National Access Point (NAP)](#publish-farezone-to-national-access-point-nap)

# Fares – How to Use FareZones

## Introduction to FareZones

FareZones define the geographic areas where a ticket is valid for use. They are also used to calculate the fare between two stops by counting the number of FareZones a journey passes through.  
>[!NOTE] 
>The number of FareZones a ticket is valid for may differ from the number used in fare calculation.

Each FareZone is managed by a transport authority, referenced in the `authorityRef` field. The valid area for a FareZone is described by a polygon in the `geometry` field.

FareZones must also define how they are connected using the `zoneTopology` field. Legal values is:

| ZoneTopology | Description |
|--------------|-------------|
| tiled        |             |

To calculate the price of a journey across multiple FareZones, each zone's neighbors must be specified. This is done in the `neighbours` field, which lists all neighboring FareZones separated by colons (`:`).

## Grouping of FareZones

In many cases, tickets are valid across a group of FareZones — for example, one county like **Buskerud** or a regional structure such as the **Kristiansand** area.

The FareZone owner can group these zones into a [GroupOfTariffZones](/10-Objects/GroupOfTariffZones.markdown). Sales and ticketing systems refer to the `GroupOfTariffZones` rather than to each individual FareZone. This setup allows FareZone owners to update the included zones without requiring changes from client systems.

## Object Descriptions

- [FareZone](/10-Objects/FareZone.markdown)
- [GroupOfTariffZones](/10-Objects/GroupOfTariffZones.markdown)

# Guideline to optional fields
This chapter is describing how optional fields should be filled out in different context
## Geometry
`Geometry` must be filled out when `scopingMethod` is `implicitSpatialProjection`


# Publish FareZone to National Access Point (NAP)
FareZones is sendt to NAP in a [SiteFram](/01-Frames/03-SiteFrame.markdown) within a PublicationDelivery
The PublicationDelivery should have the following fields filled out:
|Field|Description|
|-|-|
|PublicationTimestamp|ISO8601 formated date string, when the publish to NAP is done|
|ParticipantRef||
|Description||

in [SiteFrame](/01-Frames/03-SiteFrame.markdown), the FareZones is an array of FareZones within the field "tariffZones"

## Example
    <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <PublicationDelivery xmlns="http://www.netex.org.uk/netex" xmlns:ns2="http://www.opengis.net/gml/3.2" xmlns:ns3="http://www.siri.org.uk/siri">
        <PublicationTimestamp>2021-03-09T16:37:26.922</PublicationTimestamp>
        <ParticipantRef>org.entur.netex.conversion.osm.OsmToNetexApp</ParticipantRef>
        <Description>Generated by osm-to-netex https://github.com/entur/osm-to-netex</Description>
        <dataObjects>
            <SiteFrame created="2021-03-09T16:37:26.864" version="1" id="OSM:SiteFrame:1615304246812">
                <FrameDefaults>
                    <DefaultLocale>
                        <TimeZone>Europe/Paris</TimeZone>
                    </DefaultLocale>
                </FrameDefaults>
                <tariffZones>
                    <FareZone version="1" id="VOT:FareZone:19">
                        <ValidBetween>
                            <FromDate>2021-03-09T00:00:00</FromDate>
                        </ValidBetween>
                        <Name lang="nor">Kongsberg</Name>
                        <PrivateCode>630</PrivateCode>
                        <members>
                            <ScheduledStopPointRef ref="NSR:StopPlace:16845"/>
                            <ScheduledStopPointRef ref="NSR:StopPlace:16848"/>
                        </members>
                        <ns2:Polygon ns2:id="GEN-PolygonType-10673396">
                            <ns2:exterior>
                                <ns2:LinearRing>
                                    <ns2:posList>59.69729474436 9.56136557616  59.58258879394 9.91558959938 59.46601814332 9.97880295769 59.46843265215 9.82246394625 59.69729474436 9.56136557616</ns2:posList>
                                </ns2:LinearRing>
                            </ns2:exterior>
                        </ns2:Polygon>
                        <ZoneTopology>tiled</ZoneTopology>
                        <ScopingMethod>explicitStops</ScopingMethod>
                        <AuthorityRef ref="VOT:Authority:VTFK_ID"/>
                        <neighbours>
                            <FareZoneRef ref="VOT:FareZone:17"/>
                            <FareZoneRef ref="VOT:FareZone:14"/>
                        </neighbours>
                    </FareZone>
                </tariffZones>
            </SiteFrame>
        </dataObjects>
    </PublicationDelivery>


